{% extends 'quiz/adminbase.html' %}
{% load static %}
{% block content %}

<div class="content-wrapper">
  <div class="container-fluid">
    <div class="row mb-4">
      <div class="col-12">
        <h2 class="section-title">AI Adoption Prediction Dashboard</h2>
        <p class="text-muted">Analyze and predict AI adoption patterns among students</p>
      </div>
    </div>
    
    <!-- Filter Controls -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">Filter Data</h5>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <h6>Select Faculties</h6>
              <div class="d-flex flex-wrap gap-2">
                <button class="btn btn-sm btn-outline-primary active">Business</button>
                <button class="btn btn-sm btn-outline-primary active">Engineering</button>
                <button class="btn btn-sm btn-outline-primary active">Education</button>
                <button class="btn btn-sm btn-outline-primary active">Health Sciences</button>
              </div>
            </div>
            <div class="mb-3">
              <h6>Select Study Levels</h6>
              <div class="d-flex flex-wrap gap-2">
                <button class="btn btn-sm btn-outline-primary active">Undergraduate</button>
                <button class="btn btn-sm btn-outline-primary active">Postgraduate</button>
                <button class="btn btn-sm btn-outline-primary active">Other</button>
              </div>
            </div>
            <div class="mt-3">
              <button class="btn btn-primary">Apply Filters</button>
              <button class="btn btn-outline-secondary ms-2">Reset</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card mb-4">
          <div class="card-header">
            <h5 class="card-title mb-0">Key Metrics</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6 mb-3">
                <div class="p-3 border rounded text-center">
                  <div class="display-5 text-info">70.0%</div>
                  <div class="text-muted">AI Familiarity</div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="p-3 border rounded text-center">
                  <div class="display-5 text-success">70.0%</div>
                  <div class="text-muted">AI Tools Usage</div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="p-3 border rounded text-center">
                  <div class="display-5 text-warning">33.5%</div>
                  <div class="text-muted">Positive Learning Impact</div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="p-3 border rounded text-center">
                  <div class="display-5 text-primary">2.31</div>
                  <div class="text-muted">Avg Usage Frequency</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Data Visualizations -->
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">Data Visualizations</h5>
          </div>
          <div class="card-body">
            <!-- Visualization Tabs -->
            <ul class="nav nav-tabs mb-4" id="visualizationTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="ai-familiarity-tab" data-bs-toggle="tab" data-bs-target="#ai-familiarity" type="button" role="tab">
                  AI Familiarity
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="tool-usage-tab" data-bs-toggle="tab" data-bs-target="#tool-usage" type="button" role="tab">
                  Tool Usage
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="faculty-adoption-tab" data-bs-toggle="tab" data-bs-target="#faculty-adoption" type="button" role="tab">
                  Faculty Adoption
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="challenges-tab" data-bs-toggle="tab" data-bs-target="#challenges" type="button" role="tab">
                  Challenges
                </button>
              </li>
            </ul>
            
            <!-- Tab Content -->
            <div class="tab-content" id="visualizationTabContent">
              <!-- AI Familiarity Tab -->
              <div class="tab-pane fade show active" id="ai-familiarity" role="tabpanel">
                <div class="chart-container" style="height: 400px;">
                  <canvas id="familiarityChart"></canvas>
                </div>
              </div>
              
              <!-- Tool Usage Tab -->
              <div class="tab-pane fade" id="tool-usage" role="tabpanel">
                <div class="chart-container" style="height: 400px;">
                  <canvas id="toolUsageChart"></canvas>
                </div>
              </div>
              
              <!-- Faculty Adoption Tab -->
              <div class="tab-pane fade" id="faculty-adoption" role="tabpanel">
                <div class="chart-container" style="height: 400px;">
                  <canvas id="facultyAdoptionChart"></canvas>
                </div>
              </div>
              
              <!-- Challenges Tab -->
              <div class="tab-pane fade" id="challenges" role="tabpanel">
                <div class="chart-container" style="height: 400px;">
                  <canvas id="challengesChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- AI Adoption Prediction -->
    <div class="row">
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">AI Adoption by Faculty</h5>
          </div>
          <div class="card-body">
            <div class="chart-container" style="height: 300px;">
              <canvas id="adoptionByFacultyChart"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">AI Adoption by Study Level</h5>
          </div>
          <div class="card-body">
            <div class="chart-container" style="height: 300px;">
              <canvas id="adoptionByLevelChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Recent Insights -->
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title mb-0">AI-Generated Insights</h5>
          </div>
          <div class="card-body">
            <div class="insight-container">
              <div class="insight-item">
                <div class="insight-icon bg-primary">
                  <i class="fas fa-lightbulb"></i>
                </div>
                <div class="insight-content">
                  <p>Students in Engineering faculty show highest AI adoption rates, with 78% reporting regular tool usage.</p>
                </div>
              </div>
              <div class="insight-item">
                <div class="insight-icon bg-success">
                  <i class="fas fa-lightbulb"></i>
                </div>
                <div class="insight-content">
                  <p>Students who use AI tools report a 23% improvement in quiz scores compared to non-users.</p>
                </div>
              </div>
              <div class="insight-item">
                <div class="insight-icon bg-warning">
                  <i class="fas fa-lightbulb"></i>
                </div>
                <div class="insight-content">
                  <p>Most common challenge reported: "Understanding AI tool outputs" (42% of respondents).</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .content-wrapper {
    padding: 1.5rem;
    background-color: #151521;
    color: var(--text-primary, #ffffff);
  }
  
  .section-title {
    font-size: 1.8rem;
    font-weight: 600;
    color: #24b0ed;
    margin-bottom: 0.5rem;
  }
  
  .text-muted {
    color: rgba(255, 255, 255, 0.6) !important;
  }
  
  .card {
    border-radius: 12px;
    border: none;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    background-color: #1e1e2d;
    border: 1px solid rgba(255, 255, 255, 0.1);
    overflow: hidden;
  }
  
  .card-header {
    background-color: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1rem 1.25rem;
  }
  
  .card-title {
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
  }
  
  .nav-tabs {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .nav-tabs .nav-link {
    color: rgba(255, 255, 255, 0.7);
    border: none;
    border-bottom: 3px solid transparent;
    border-radius: 0;
    padding: 0.75rem 1.25rem;
    font-weight: 500;
  }
  
  .nav-tabs .nav-link:hover {
    color: rgba(255, 255, 255, 0.9);
    border-color: transparent;
  }
  
  .nav-tabs .nav-link.active {
    color: #24b0ed;
    background-color: transparent;
    border-bottom: 3px solid #24b0ed;
  }
  
  .chart-container {
    position: relative;
    width: 100%;
  }
  
  .insight-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .insight-item {
    display: flex;
    align-items: flex-start;
    padding: 0.5rem 0;
  }
  
  .insight-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    color: white;
    flex-shrink: 0;
  }
  
  .insight-content {
    flex: 1;
  }
  
  .btn-outline-primary {
    color: #24b0ed;
    border-color: #24b0ed;
  }
  
  .btn-outline-primary:hover {
    background-color: #24b0ed;
    color: white;
  }
  
  .btn-outline-primary.active {
    background-color: #24b0ed;
    color: white;
  }
  
  .gap-2 {
    gap: 0.5rem;
  }
  
  .border {
    border-color: rgba(255, 255, 255, 0.1) !important;
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Parse chart data from Django templates
    const adoptionChartData = JSON.parse('{{ adoption_chart_data|escapejs }}');
    const toolsChartData = JSON.parse('{{ tools_chart_data|escapejs }}');
    const challengeChartData = JSON.parse('{{ challenge_chart_data|escapejs }}');
    const facultyChartData = JSON.parse('{{ faculty_chart_data|escapejs }}');
    
    // AI Familiarity Chart
    const familiarityCtx = document.getElementById('familiarityChart').getContext('2d');
    new Chart(familiarityCtx, {
      type: 'bar',
      data: {
        labels: ['Not Familiar', 'Somewhat Familiar', 'Very Familiar'],
        datasets: [{
          label: 'Number of Students',
          data: [230, 450, 320],
          backgroundColor: [
            'rgba(255, 99, 132, 0.6)',
            'rgba(54, 162, 235, 0.6)',
            'rgba(75, 192, 192, 0.6)',
          ],
          borderColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            'rgb(75, 192, 192)',
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'AI Familiarity Distribution',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { color: 'rgba(255, 255, 255, 0.1)' }
          },
          x: {
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { display: false }
          }
        }
      }
    });
    
    // Tool Usage Chart
    const toolUsageCtx = document.getElementById('toolUsageChart').getContext('2d');
    new Chart(toolUsageCtx, {
      type: 'bar',
      data: {
        labels: ['ChatGPT', 'Grammarly', 'GitHub Copilot', 'DALL-E', 'Midjourney'],
        datasets: [{
          label: 'Usage Count',
          data: [680, 450, 310, 180, 120],
          backgroundColor: 'rgba(54, 162, 235, 0.6)',
          borderColor: 'rgb(54, 162, 235)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'AI Tool Usage Distribution',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { color: 'rgba(255, 255, 255, 0.1)' }
          },
          x: {
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { display: false }
          }
        }
      }
    });
    
    // Faculty Adoption Chart
    const facultyAdoptionCtx = document.getElementById('facultyAdoptionChart').getContext('2d');
    new Chart(facultyAdoptionCtx, {
      type: 'radar',
      data: {
        labels: ['Engineering', 'Business', 'Health Sciences', 'Education'],
        datasets: [{
          label: 'AI Adoption Rate',
          data: [78, 65, 52, 48],
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgb(75, 192, 192)',
          pointBackgroundColor: 'rgb(75, 192, 192)',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: 'rgb(75, 192, 192)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'AI Adoption by Faculty',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        },
        scales: {
          r: {
            angleLines: {
              color: 'rgba(255, 255, 255, 0.1)'
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.1)'
            },
            pointLabels: {
              color: 'rgba(255, 255, 255, 0.7)'
            },
            ticks: {
              backdropColor: 'transparent',
              color: 'rgba(255, 255, 255, 0.7)'
            }
          }
        }
      }
    });
    
    // Challenges Chart
    const challengesCtx = document.getElementById('challengesChart').getContext('2d');
    new Chart(challengesCtx, {
      type: 'pie',
      data: {
        labels: ['Understanding outputs', 'Cost', 'Technical skills', 'Integration', 'Reliability'],
        datasets: [{
          data: [42, 28, 15, 10, 5],
          backgroundColor: [
            'rgba(255, 99, 132, 0.6)',
            'rgba(54, 162, 235, 0.6)',
            'rgba(255, 206, 86, 0.6)',
            'rgba(75, 192, 192, 0.6)',
            'rgba(153, 102, 255, 0.6)'
          ],
          borderColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            'rgb(255, 206, 86)',
            'rgb(75, 192, 192)',
            'rgb(153, 102, 255)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'right',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'Challenges in AI Adoption',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        }
      }
    });
    
    // Adoption by Faculty Chart
    const adoptionByFacultyCtx = document.getElementById('adoptionByFacultyChart').getContext('2d');
    new Chart(adoptionByFacultyCtx, {
      type: 'bar',
      data: {
        labels: ['Engineering', 'Business', 'Health Sciences', 'Education'],
        datasets: [{
          label: 'High Adoption',
          data: [45, 30, 25, 20],
          backgroundColor: 'rgba(75, 192, 192, 0.6)',
          borderColor: 'rgb(75, 192, 192)',
          borderWidth: 1
        }, {
          label: 'Medium Adoption',
          data: [30, 35, 25, 25],
          backgroundColor: 'rgba(255, 206, 86, 0.6)',
          borderColor: 'rgb(255, 206, 86)',
          borderWidth: 1
        }, {
          label: 'Low Adoption',
          data: [25, 35, 50, 55],
          backgroundColor: 'rgba(255, 99, 132, 0.6)',
          borderColor: 'rgb(255, 99, 132)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'AI Adoption Levels by Faculty',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            stacked: true,
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { color: 'rgba(255, 255, 255, 0.1)' }
          },
          x: {
            stacked: true,
            ticks: { color: 'rgba(255, 255, 255, 0.7)' },
            grid: { display: false }
          }
        }
      }
    });
    
    // Adoption by Level Chart
    const adoptionByLevelCtx = document.getElementById('adoptionByLevelChart').getContext('2d');
    new Chart(adoptionByLevelCtx, {
      type: 'doughnut',
      data: {
        labels: ['Undergraduate', 'Postgraduate', 'Other'],
        datasets: [{
          data: [55, 35, 10],
          backgroundColor: [
            'rgba(54, 162, 235, 0.6)',
            'rgba(75, 192, 192, 0.6)',
            'rgba(255, 206, 86, 0.6)'
          ],
          borderColor: [
            'rgb(54, 162, 235)',
            'rgb(75, 192, 192)',
            'rgb(255, 206, 86)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'right',
            labels: {
              color: 'rgba(255, 255, 255, 0.7)'
            }
          },
          title: {
            display: true,
            text: 'AI Adoption by Study Level',
            color: 'rgba(255, 255, 255, 0.9)'
          }
        }
      }
    });
    
    // Filter button functionality
    document.querySelectorAll('.btn-outline-primary').forEach(btn => {
      btn.addEventListener('click', function() {
        this.classList.toggle('active');
      });
    });
  });
</script>

{% endblock content %} 